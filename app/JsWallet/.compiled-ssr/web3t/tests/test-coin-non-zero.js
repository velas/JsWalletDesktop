// Generated by LiveScript 1.6.0
(function(){
  var mnemonic, index;
  mnemonic = require('./mnemonic.js');
  index = 0;
  module.exports = function(coin, cb){
    var createAccount, getBalance, sendAllFunds;
    createAccount = coin.createAccount, getBalance = coin.getBalance, sendAllFunds = coin.sendAllFunds;
    return createAccount({
      mnemonic: mnemonic,
      index: index
    }, function(err, account){
      if (err != null) {
        return cb(err);
      }
      return getBalance({
        account: account
      }, function(err, balance){
        if (err != null) {
          return cb(err);
        }
        if (+balance === 0) {
          return cb("Balance is zero");
        }
        return createAccount({
          mnemonic: mnemonic,
          index: 1
        }, function(err, recipient){
          if (err) {
            return cb(err);
          }
          return sendAllFunds({
            account: account,
            to: recipient.address
          }, function(err, tx){
            if (err != null) {
              return cb(err);
            }
            return cb(null);
          });
        });
      });
    });
  };
}).call(this);
