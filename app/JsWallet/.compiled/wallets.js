// Generated by LiveScript 1.6.0
(function(){
  var react, seedmem, web3, getLang, getPrimaryInfo, desktop, mobile, signTransaction, ref$, map, take, drop, filter, find, groupBy, sortBy, objToPairs, keys, wallets, choise, toString$ = {}.toString;
  react = require('react');
  seedmem = require('../seed.ls');
  web3 = require('../web3.ls');
  getLang = require('../get-lang.ls');
  getPrimaryInfo = require('../get-primary-info.ls');
  desktop = require('./wallets-desktop.ls');
  mobile = require('./wallets-mobile.ls');
  signTransaction = require('../components/sign-transaction.ls');
  ref$ = require('prelude-ls'), map = ref$.map, take = ref$.take, drop = ref$.drop, filter = ref$.filter, find = ref$.find, groupBy = ref$.groupBy, sortBy = ref$.sortBy, objToPairs = ref$.objToPairs, keys = ref$.keys;
  wallets = function(arg$){
    var store, web3t, func;
    store = arg$.store, web3t = arg$.web3t;
    func = choise[store.current.device];
    if (toString$.call(func).slice(8, -1) !== 'Function') {
      return null;
    }
    return signTransaction({
      store: store,
      web3t: web3t
    }) || func({
      store: store,
      web3t: web3t
    });
  };
  wallets.init = function(arg$, cb){
    var store, web3t, ref$, ref1$;
    store = arg$.store, web3t = arg$.web3t;
    if ((ref$ = store.current.send) != null) {
      delete ref$.wallet;
    }
    if ((ref1$ = store.current.send) != null) {
      ref1$.txType = 'regular';
    }
    store.current.send.isSwap = false;
    store.current.send.chosenNetwork = null;
    seedmem.mnemonic = seedmem.get();
    if (store.current.account != null) {
      return cb(null);
    }
    return web3t.init(function(err){
      cb(null);
      return setImmediate(function(){
        if (store.urlHashParams.page != null) {
          return store.current.page = store.urlHashParams.page;
        }
      });
    });
  };
  wallets.focus = function(arg$, cb){
    var store, web3t;
    store = arg$.store, web3t = arg$.web3t;
    return web3t.refresh(function(err){
      return cb(err, null);
    });
  };
  choise = {
    mobile: mobile,
    desktop: desktop
  };
  module.exports = wallets;
}).call(this);
